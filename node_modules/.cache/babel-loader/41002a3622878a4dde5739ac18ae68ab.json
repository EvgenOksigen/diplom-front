{"ast":null,"code":"var _jsxFileName = \"/home/evgeny/Public/diploma/diplom-front/src/routes/index.js\";\nimport React from 'react';\nimport { Route, Switch } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Auth from \"../views/pages/Auth/Auth\";\nimport DefaultRoute from './default';\nimport GuestRoute from './hoc/GuestRoute';\nimport { me, setMe } from \"../state/ducks/user/actions\";\nimport PrivateRoute from './hoc/PrivateRoute';\nimport Home from '../views/pages/Home/Home';\nimport Admin from '../views/pages/Admin/Admin';\nimport Teacher from '../views/pages/Teacher/Teacher';\nimport Student from '../views/pages/Student/Student';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      resources: []\n    };\n\n    this.getMe = async () => {\n      const {\n        me\n      } = this.props;\n      const token = localStorage.getItem(\"token\");\n\n      if (token) {\n        await me().catch(() => {\n          localStorage.removeItem(\"token\");\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getMe();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const {\n      profile\n    } = nextProps;\n    console.log(profile);\n\n    if (profile && profile.isLogged && !profile.user) {\n      this.setState({\n        loading: true\n      });\n      this.getMe();\n    }\n  }\n\n  render() {\n    const {\n      loading\n    } = this.state;\n    return React.createElement(React.Fragment, null, !loading && React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      component: DefaultRoute,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), React.createElement(GuestRoute, {\n      path: \"/login\",\n      exact: true,\n      component: Auth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      path: \"/home\",\n      exact: true,\n      component: Home,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/home/admin\",\n      exact: true,\n      render: () => React.createElement(Admin, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/home/teacher\",\n      exact: true,\n      render: () => React.createElement(Teacher, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/home/student\",\n      exact: true,\n      render: () => React.createElement(Student, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst mapStateToProps = ({\n  user\n}) => ({\n  user\n});\n\nconst mapDispatchToProps = {\n  me,\n  setMe\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/evgeny/Public/diploma/diplom-front/src/routes/index.js"],"names":["React","Route","Switch","connect","Auth","DefaultRoute","GuestRoute","me","setMe","PrivateRoute","Home","Admin","Teacher","Student","App","Component","state","loading","resources","getMe","props","token","localStorage","getItem","catch","removeItem","setState","componentDidMount","UNSAFE_componentWillReceiveProps","nextProps","profile","console","log","isLogged","user","render","mapStateToProps","mapDispatchToProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,kBAA9B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,OAAOC,YAAP,MAAyB,WAAzB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AAEA,SAASC,EAAT,EAAaC,KAAb,QAA0B,6BAA1B;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,OAAOC,KAAP,MAAkB,4BAAlB;AACA,OAAOC,OAAP,MAAoB,gCAApB;AACA,OAAOC,OAAP,MAAoB,gCAApB;;AAEA,MAAMC,GAAN,SAAkBd,KAAK,CAACe,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAEhCC,KAFgC,GAExB;AACNC,MAAAA,OAAO,EAAE,IADH;AAENC,MAAAA,SAAS,EAAE;AAFL,KAFwB;;AAAA,SAWhCC,KAXgC,GAWxB,YAAY;AAClB,YAAM;AAAEZ,QAAAA;AAAF,UAAS,KAAKa,KAApB;AAEA,YAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AAEC,UAAIF,KAAJ,EAAW;AACV,cAAMd,EAAE,GAAGiB,KAAL,CAAW,MAAM;AACrBF,UAAAA,YAAY,CAACG,UAAb,CAAwB,OAAxB;AACD,SAFK,CAAN;AAGA;;AACD,WAAKC,QAAL,CAAc;AAAET,QAAAA,OAAO,EAAE;AAAX,OAAd;AAEF,KAvB+B;AAAA;;AAOhCU,EAAAA,iBAAiB,GAAG;AAClB,SAAKR,KAAL;AACD;;AAgBDS,EAAAA,gCAAgC,CAACC,SAAD,EAAY;AAC1C,UAAM;AAAEC,MAAAA;AAAF,QAAcD,SAApB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;;AAEA,QAAIA,OAAO,IAAIA,OAAO,CAACG,QAAnB,IAA+B,CAACH,OAAO,CAACI,IAA5C,EAAkD;AAChD,WAAKR,QAAL,CAAc;AAAET,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,WAAKE,KAAL;AACD;AACF;;AAEDgB,EAAAA,MAAM,GAAI;AACR,UAAM;AAAClB,MAAAA;AAAD,QAAW,KAAKD,KAAtB;AACA,WACE,0CACG,CAACC,OAAD,IACC,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,GAAZ;AAAgB,MAAA,KAAK,MAArB;AAAsB,MAAA,SAAS,EAAEZ,YAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAGE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAC,QAAjB;AAA0B,MAAA,KAAK,MAA/B;AAAgC,MAAA,SAAS,EAAED,IAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAKE,oBAAC,YAAD;AAAc,MAAA,IAAI,EAAC,OAAnB;AAA2B,MAAA,KAAK,MAAhC;AAAkC,MAAA,SAAS,EAAEM,IAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EAOE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,aAAZ;AAA0B,MAAA,KAAK,MAA/B;AAAgC,MAAA,MAAM,EAAE,MAAM,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,EASE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,eAAZ;AAA4B,MAAA,KAAK,MAAjC;AAAkC,MAAA,MAAM,EAAE,MAAM,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,EAWE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,eAAZ;AAA4B,MAAA,KAAK,MAAjC;AAAkC,MAAA,MAAM,EAAE,MAAM,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXF,CAFJ,CADF;AAsBD;;AA3D+B;;AA8DlC,MAAM0B,eAAe,GAAG,CAAC;AAAEF,EAAAA;AAAF,CAAD,MAAe;AAAEA,EAAAA;AAAF,CAAf,CAAxB;;AAEA,MAAMG,kBAAkB,GAAG;AAAE9B,EAAAA,EAAF;AAAMC,EAAAA;AAAN,CAA3B;AAEA,eAAeL,OAAO,CAACiC,eAAD,EAAkBC,kBAAlB,CAAP,CAA6CvB,GAA7C,CAAf","sourcesContent":["import React from 'react';\nimport { Route, Switch } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Auth from \"../views/pages/Auth/Auth\";\nimport DefaultRoute from './default'\nimport GuestRoute from './hoc/GuestRoute';\n\nimport { me, setMe } from \"../state/ducks/user/actions\";\nimport PrivateRoute from './hoc/PrivateRoute';\nimport Home from '../views/pages/Home/Home';\nimport Admin from '../views/pages/Admin/Admin';\nimport Teacher from '../views/pages/Teacher/Teacher';\nimport Student from '../views/pages/Student/Student';\n\nclass App extends React.Component {\n\n  state = {\n    loading: true,\n    resources: []\n  };\n\n  componentDidMount() {\n    this.getMe();\n  }\n\n  getMe = async () => {\n    const { me } = this.props;\n\n    const token = localStorage.getItem(\"token\");\n\n     if (token) {\n      await me().catch(() => {\n        localStorage.removeItem(\"token\");\n      });\n     }\n     this.setState({ loading: false });\n\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { profile } = nextProps;\n    console.log(profile);\n\n    if (profile && profile.isLogged && !profile.user) {\n      this.setState({ loading: true });\n      this.getMe();\n    }\n  }\n\n  render () { \n    const {loading}= this.state;\n    return(\n      <>\n        {!loading && (\n          <Switch>\n            <Route path=\"/\" exact component={DefaultRoute} />\n\n            <GuestRoute path=\"/login\" exact component={Auth} />\n\n            <PrivateRoute path=\"/home\" exact  component={Home}/>\n        \n            <Route path=\"/home/admin\" exact render={() => <Admin />} />\n\n            <Route path=\"/home/teacher\" exact render={() => <Teacher />} />\n\n            <Route path=\"/home/student\" exact render={() => <Student />} />\n\n          </Switch>\n          )\n        \n        }\n      </>\n     ) \n  }\n}\n\nconst mapStateToProps = ({ user }) => ({ user });\n\nconst mapDispatchToProps = { me, setMe };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}